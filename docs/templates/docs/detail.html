{% extends 'base.html' %}

{% block content %}

{% if error %}
{{ error }}
<br/>
<br/>
{% endif %}

{% comment %}
Main Document Information
{% endcomment %}
<div class="text-center border mb-4">
  <br/>
  Title: {{document.title}},
  Description: {{document.description}}
  <br/>
  <br/>
  Client: {{document.client}},
  Application: {{document.application}},
  Type: {{document.type}},
  Category: {{document.category}}
  <br/>
  <br/>
</div>

{% csrf_token %}
{% for step in steps.all %}
{% if step.title == document.title %}
<div class="row border">
  <div class="col-2 border-right">
    <p> Step {{step.step_num}}</p>
  </div>
  <div class="col-5">
    <p class="border-bottom">Description: {{step.step_text}}</p>
    <p class="border-bottom">Navigation: {{step.step_nav}}</p>
    <p>Notes: {{step.step_note}}</p>
  </div>
  <div class="col-5 border-left">
    {% if step.step_image %}
    Screenshot of Step:
    <br/>
    <img src="{{ step.step_image.url }}" class="img-fluid" width="500" height="400"/>
    {% else %}
    N/A
    {% endif %}
  </div>
</div>
{% endif %}
{% endfor %}

{% comment %}
Create New Step
{% endcomment %}
<form id="add_step" method="POST" action="{% url 'add_step' document.id%}" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="row pt-3 mt-4 mb-3 border-top">
    <div class="col-10">
      Step Number: <input type="text" name="step_num" required/>
      <br/>
      Navigation: <input type="text" name="step_nav"/>
      <br/>
      Description: <input type="textbox" name="step_text" required/>
      <br/>
      Notes: <input type="textbox" name="step_note"/>
      <br/>
      Image:
      <input type="file" name="step_image"/>
      <br/>
      <br/>
      <input class="btn btn-primary" type="submit" value="Add Step"/>
      <br/>
    </div>
  </div>
</form>

{% endblock %}
